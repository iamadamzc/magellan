A:\1\Magellan\test\intraday_alpha\run_phase1_baseline_backtest.py:113: FutureWarning: 'T' is deprecated and will be removed in a future version, please use 'min' instead.
  df = df.resample('5T').agg({
ðŸ“¦ Using Magellan DataCache infrastructure
ðŸ“° Loading sentiment data...
ðŸ“‚ Loading cached sentiment for QQQ
   QQQ: 1471 days (51 non-zero)

================================================================================
ðŸš€ PHASE 1.1: BASELINE BACKTEST (2024-2025)
================================================================================
Period: 2022-01-01 â†’ 2026-01-10
Symbols: QQQ
Initial Capital: $25,000.00
Slippage: 5 bps per trade
================================================================================

ðŸ“¥ Fetching data for QQQ (5Min)...
âœ… Fetched 191767 bars for QQQ

ðŸ“Š Processing 190491 bars across 1 symbols...
================================================================================

  ðŸ“ˆ LONG QQQ: 15 shares @ $399.59 (cost: $5,993.85)
  ðŸ“‰ EXIT QQQ: 15 shares @ $398.88 | PnL: $-10.64 (-0.18%) | Hold: 0 days 04:55:00
  ðŸ“ˆ LONG QQQ: 15 shares @ $400.77 (cost: $6,011.55)
  ðŸ“‰ EXIT QQQ: 15 shares @ $401.73 | PnL: $+14.38 (+0.24%) | Hold: 0 days 21:45:00
  ðŸ“ˆ LONG QQQ: 15 shares @ $396.03 (cost: $5,940.42)
  ðŸ“‰ EXIT QQQ: 15 shares @ $395.37 | PnL: $-9.84 (-0.17%) | Hold: 0 days 03:45:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $382.57 (cost: $6,121.14)
  ðŸ“‰ EXIT QQQ: 16 shares @ $382.70 | PnL: $+2.04 (+0.03%) | Hold: 0 days 18:40:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $374.59 (cost: $5,993.40)
  ðŸ“‰ EXIT QQQ: 16 shares @ $385.08 | PnL: $+167.84 (+2.80%) | Hold: 1 days 14:50:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $389.13 (cost: $6,226.15)
  ðŸ“‰ EXIT QQQ: 16 shares @ $385.51 | PnL: $-58.04 (-0.93%) | Hold: 0 days 02:30:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $388.06 (cost: $6,209.02)
  ðŸ“‰ EXIT QQQ: 16 shares @ $386.05 | PnL: $-32.27 (-0.52%) | Hold: 0 days 04:45:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $378.08 (cost: $6,049.26)
  ðŸ“‰ EXIT QQQ: 16 shares @ $373.68 | PnL: $-70.33 (-1.16%) | Hold: 3 days 18:30:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $374.79 (cost: $5,996.60)
  ðŸ“‰ EXIT QQQ: 16 shares @ $370.47 | PnL: $-69.00 (-1.15%) | Hold: 0 days 10:45:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $373.20 (cost: $5,971.14)
  ðŸ“‰ EXIT QQQ: 16 shares @ $369.93 | PnL: $-52.19 (-0.87%) | Hold: 0 days 02:45:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $367.84 (cost: $5,885.50)
  ðŸ“‰ EXIT QQQ: 16 shares @ $366.20 | PnL: $-26.35 (-0.45%) | Hold: 0 days 11:00:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $359.73 (cost: $6,115.41)
  ðŸ“‰ EXIT QQQ: 17 shares @ $350.82 | PnL: $-151.39 (-2.48%) | Hold: 0 days 08:10:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $353.69 (cost: $6,012.67)
  ðŸ“‰ EXIT QQQ: 17 shares @ $349.23 | PnL: $-75.84 (-1.26%) | Hold: 0 days 01:20:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $341.41 (cost: $6,145.39)
  ðŸ“‰ EXIT QQQ: 18 shares @ $347.11 | PnL: $+102.52 (+1.67%) | Hold: 0 days 14:45:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $346.60 (cost: $5,892.25)
  ðŸ“‰ EXIT QQQ: 17 shares @ $342.84 | PnL: $-64.00 (-1.09%) | Hold: 0 days 06:30:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $343.57 (cost: $5,840.72)
  ðŸ“‰ EXIT QQQ: 17 shares @ $344.20 | PnL: $+10.64 (+0.18%) | Hold: 1 days 09:50:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $349.12 (cost: $5,935.12)
  ðŸ“‰ EXIT QQQ: 17 shares @ $344.99 | PnL: $-70.33 (-1.18%) | Hold: 0 days 03:20:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $345.45 (cost: $5,872.69)
  ðŸ“‰ EXIT QQQ: 17 shares @ $337.93 | PnL: $-127.87 (-2.18%) | Hold: 0 days 14:45:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $348.84 (cost: $5,930.35)
  ðŸ“‰ EXIT QQQ: 17 shares @ $344.03 | PnL: $-81.88 (-1.38%) | Hold: 0 days 02:15:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $350.24 (cost: $5,954.00)
  ðŸ“‰ EXIT QQQ: 17 shares @ $360.73 | PnL: $+178.41 (+3.00%) | Hold: 3 days 17:55:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $364.20 (cost: $5,827.23)
  ðŸ“‰ EXIT QQQ: 16 shares @ $370.19 | PnL: $+95.88 (+1.65%) | Hold: 0 days 17:35:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $361.26 (cost: $6,141.43)
  ðŸ“‰ EXIT QQQ: 17 shares @ $357.91 | PnL: $-56.94 (-0.93%) | Hold: 0 days 01:20:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $359.94 (cost: $6,118.98)
  ðŸ“‰ EXIT QQQ: 17 shares @ $355.25 | PnL: $-79.69 (-1.30%) | Hold: 0 days 05:05:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $356.43 (cost: $6,059.28)
  ðŸ“‰ EXIT QQQ: 17 shares @ $356.97 | PnL: $+9.24 (+0.15%) | Hold: 0 days 08:20:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $358.74 (cost: $6,098.57)
  ðŸ“‰ EXIT QQQ: 17 shares @ $355.67 | PnL: $-52.14 (-0.85%) | Hold: 0 days 04:40:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $358.57 (cost: $6,095.68)
  ðŸ“‰ EXIT QQQ: 17 shares @ $354.99 | PnL: $-60.81 (-1.00%) | Hold: 0 days 00:40:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $354.92 (cost: $6,033.60)
  ðŸ“‰ EXIT QQQ: 17 shares @ $366.57 | PnL: $+198.04 (+3.28%) | Hold: 1 days 08:55:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $366.48 (cost: $5,863.73)
  ðŸ“‰ EXIT QQQ: 16 shares @ $362.37 | PnL: $-65.83 (-1.12%) | Hold: 0 days 01:25:00
  ðŸ“ˆ LONG QQQ: 16 shares @ $363.76 (cost: $5,820.19)
  ðŸ“‰ EXIT QQQ: 16 shares @ $356.68 | PnL: $-113.28 (-1.95%) | Hold: 0 days 09:35:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $357.49 (cost: $6,077.31)
  ðŸ“‰ EXIT QQQ: 17 shares @ $350.30 | PnL: $-122.21 (-2.01%) | Hold: 0 days 06:30:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $346.37 (cost: $5,888.34)
  ðŸ“‰ EXIT QQQ: 17 shares @ $345.35 | PnL: $-17.44 (-0.30%) | Hold: 0 days 06:10:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $348.75 (cost: $5,928.81)
  ðŸ“‰ EXIT QQQ: 17 shares @ $352.93 | PnL: $+71.06 (+1.20%) | Hold: 0 days 14:40:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $355.86 (cost: $6,049.58)
  ðŸ“‰ EXIT QQQ: 17 shares @ $354.78 | PnL: $-18.28 (-0.30%) | Hold: 0 days 04:25:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $356.77 (cost: $6,065.06)
  ðŸ“‰ EXIT QQQ: 17 shares @ $353.50 | PnL: $-55.51 (-0.92%) | Hold: 0 days 05:05:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $353.35 (cost: $6,006.89)
  ðŸ“‰ EXIT QQQ: 17 shares @ $354.97 | PnL: $+27.64 (+0.46%) | Hold: 0 days 05:00:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $354.48 (cost: $6,026.11)
  ðŸ“‰ EXIT QQQ: 17 shares @ $352.38 | PnL: $-35.59 (-0.59%) | Hold: 0 days 01:50:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $345.93 (cost: $5,880.86)
  ðŸ“‰ EXIT QQQ: 17 shares @ $344.98 | PnL: $-16.24 (-0.28%) | Hold: 0 days 01:20:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $347.69 (cost: $5,910.79)
  ðŸ“‰ EXIT QQQ: 17 shares @ $345.22 | PnL: $-42.10 (-0.71%) | Hold: 0 days 04:20:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $343.64 (cost: $5,841.91)
  ðŸ“‰ EXIT QQQ: 17 shares @ $340.79 | PnL: $-48.49 (-0.83%) | Hold: 0 days 02:50:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $340.15 (cost: $5,782.55)
  ðŸ“‰ EXIT QQQ: 17 shares @ $338.39 | PnL: $-29.91 (-0.52%) | Hold: 1 days 04:30:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $329.55 (cost: $5,931.98)
  ðŸ“‰ EXIT QQQ: 18 shares @ $322.54 | PnL: $-126.29 (-2.13%) | Hold: 0 days 09:10:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $320.31 (cost: $5,765.58)
  ðŸ“‰ EXIT QQQ: 18 shares @ $338.13 | PnL: $+320.77 (+5.56%) | Hold: 0 days 09:30:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $339.73 (cost: $5,775.41)
  ðŸ“‰ EXIT QQQ: 17 shares @ $335.74 | PnL: $-67.79 (-1.17%) | Hold: 0 days 08:40:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $339.18 (cost: $5,766.05)
  ðŸ“‰ EXIT QQQ: 17 shares @ $342.23 | PnL: $+51.84 (+0.90%) | Hold: 2 days 21:25:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $343.16 (cost: $5,833.75)
  ðŸ“‰ EXIT QQQ: 17 shares @ $343.59 | PnL: $+7.25 (+0.12%) | Hold: 0 days 05:25:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $347.31 (cost: $5,904.33)
  ðŸ“‰ EXIT QQQ: 17 shares @ $345.28 | PnL: $-34.62 (-0.59%) | Hold: 0 days 12:15:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $345.73 (cost: $5,877.46)
  ðŸ“‰ EXIT QQQ: 17 shares @ $342.00 | PnL: $-63.48 (-1.08%) | Hold: 0 days 03:25:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $344.15 (cost: $5,850.58)
  ðŸ“‰ EXIT QQQ: 17 shares @ $346.08 | PnL: $+32.72 (+0.56%) | Hold: 0 days 06:40:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $346.72 (cost: $5,894.30)
  ðŸ“‰ EXIT QQQ: 17 shares @ $344.73 | PnL: $-33.93 (-0.58%) | Hold: 0 days 03:50:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $340.23 (cost: $5,783.91)
  ðŸ“‰ EXIT QQQ: 17 shares @ $335.63 | PnL: $-78.16 (-1.35%) | Hold: 0 days 02:40:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $334.18 (cost: $6,015.19)
  ðŸ“‰ EXIT QQQ: 18 shares @ $331.71 | PnL: $-44.33 (-0.74%) | Hold: 0 days 03:10:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $325.55 (cost: $5,859.95)
  ðŸ“‰ EXIT QQQ: 18 shares @ $323.34 | PnL: $-39.86 (-0.68%) | Hold: 0 days 04:20:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $330.21 (cost: $5,943.69)
  ðŸ“‰ EXIT QQQ: 18 shares @ $324.74 | PnL: $-98.41 (-1.66%) | Hold: 0 days 01:45:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $323.15 (cost: $5,816.73)
  ðŸ“‰ EXIT QQQ: 18 shares @ $333.97 | PnL: $+194.79 (+3.35%) | Hold: 1 days 09:30:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $331.21 (cost: $5,961.70)
  ðŸ“‰ EXIT QQQ: 18 shares @ $332.21 | PnL: $+18.15 (+0.30%) | Hold: 1 days 01:05:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $326.45 (cost: $5,876.16)
  ðŸ“‰ EXIT QQQ: 18 shares @ $322.56 | PnL: $-70.10 (-1.19%) | Hold: 0 days 03:45:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $319.04 (cost: $5,742.71)
  ðŸ“‰ EXIT QQQ: 18 shares @ $332.21 | PnL: $+237.14 (+4.13%) | Hold: 1 days 02:15:00
  ðŸ“ˆ LONG QQQ: 18 shares @ $334.93 (cost: $6,028.79)
  ðŸ“‰ EXIT QQQ: 18 shares @ $334.35 | PnL: $-10.44 (-0.17%) | Hold: 0 days 03:10:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $339.26 (cost: $5,767.41)
  ðŸ“‰ EXIT QQQ: 17 shares @ $340.15 | PnL: $+15.14 (+0.26%) | Hold: 0 days 03:25:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $341.02 (cost: $5,797.35)
  ðŸ“‰ EXIT QQQ: 17 shares @ $339.36 | PnL: $-28.22 (-0.49%) | Hold: 0 days 01:20:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $341.17 (cost: $5,799.90)
  ðŸ“‰ EXIT QQQ: 17 shares @ $349.68 | PnL: $+144.58 (+2.49%) | Hold: 3 days 18:10:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $351.11 (cost: $5,968.79)
  ðŸ“‰ EXIT QQQ: 17 shares @ $346.56 | PnL: $-77.33 (-1.30%) | Hold: 0 days 03:15:00
  ðŸ“ˆ LONG QQQ: 17 shares @ $351.45 (cost: $5,974.58)
  ðŸ“‰ EXIT QQQ: 17 shares @ $346.03 | PnL: $-92.12 (-1.54%) | Hold: 0 days 01:50:00
Traceback (most recent call last):
  File "A:\1\Magellan\test\intraday_alpha\run_phase1_baseline_backtest.py", line 595, in <module>
    main()
  File "A:\1\Magellan\test\intraday_alpha\run_phase1_baseline_backtest.py", line 581, in main
    backtest.run_backtest()
  File "A:\1\Magellan\test\intraday_alpha\run_phase1_baseline_backtest.py", line 322, in run_backtest
    signal, alpha, rsi, vol_ratio = self.generate_signal(symbol, current_time, df)
                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "A:\1\Magellan\test\intraday_alpha\run_phase1_baseline_backtest.py", line 182, in generate_signal
    alpha, rsi, vol_ratio = self.calculate_alpha_score(symbol, df_row_index, df)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "A:\1\Magellan\test\intraday_alpha\run_phase1_baseline_backtest.py", line 141, in calculate_alpha_score
    rsi = calculate_rsi(hist_data['close'], period=params['rsi_lookback'])
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "A:\1\Magellan\src\features.py", line 267, in calculate_rsi
    gains = delta.where(delta > 0, 0.0)
                        ^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\ops\common.py", line 76, in new_method
    return method(self, other)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\arraylike.py", line 56, in __gt__
    return self._cmp_method(other, operator.gt)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\series.py", line 6132, in _cmp_method
    return self._construct_result(res_values, name=res_name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\series.py", line 6242, in _construct_result
    out = self._constructor(result, index=self.index, dtype=dtype, copy=False)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\core\series.py", line 586, in __init__
    manager = _get_option("mode.data_manager", silent=True)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\_config\config.py", line 146, in _get_option
    key = _get_single_key(pat, silent)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\_config\config.py", line 140, in _get_single_key
    key = _translate_key(key)
          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\adshu\AppData\Local\Programs\Python\Python312\Lib\site-packages\pandas\_config\config.py", line 676, in _translate_key
    def _translate_key(key: str) -> str:
    
KeyboardInterrupt
